<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
<title>亦歌扩展设置</title>
<style>
body {font:13px Tahoma, Helvetica, Arial, "\5b8b\4f53", sans-serif; color:#333; background:#e4f4fd;}
fieldset {width: 400px; height:120px; margin:18px auto; border-color:#aaa;}
#button {width: 400px; margin:0 auto; position:relative;}
#close {position:absolute; top:0; right: 3px;}
.space {height: 8px;}
#note {color:#777;}
</style>
</head>

<body>
<fieldset>
	<legend>亦歌扩展设置</legend>
	<div class="space"></div>
	<input id="player" type="checkbox" />
	<label>在后台播放</label>
	<div class="space"></div>
	<input id="show" type="checkbox" />
	<label>开启时显示歌词栏</label>
	<div class="space"></div>
	<div class="space"></div>
	<div id="note">更改将在下一次开启亦歌时生效</div>
</fieldset>

<div id="button">
	<button id="close" onclick="window.close();">关闭</button>
</div>

<script type="text/javascript">
var core = chrome.extension.getBackgroundPage();
var player = document.getElementById('player');
var show = document.getElementById('show');

function init(){
	var innerPlayer = localStorage['innerPlayer'];
	if (innerPlayer === 'true' || localStorage['innerPlayer'] === undefined) {
		player.checked = true;
	}

	var showControl = localStorage['showControl'];
	if (showControl === 'true' || showControl === undefined) {
		show.checked = true;
	}

	player.addEventListener('change', function(){
		localStorage['innerPlayer'] = this.checked;	
		core.openInWindow = !this.checked;
	});

	show.addEventListener('change', function(){
		localStorage['showControl'] = this.checked;
		core.showControl = this.checked;
	})
};

init();
</script>

</body>
</html>
